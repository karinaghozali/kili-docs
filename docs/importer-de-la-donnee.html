<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Importer de la donnée · Kili Docs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;Kili Technology a deux façons d&#x27;importer des données :&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Importer de la donnée · Kili Docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://kili-technology.github.io/kili-docs/"/><meta property="og:description" content="&lt;p&gt;Kili Technology a deux façons d&#x27;importer des données :&lt;/p&gt;
"/><meta property="og:image" content="https://kili-technology.github.io/kili-docs/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://kili-technology.github.io/kili-docs/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/kili-docs/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/kili-docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/kili-docs/css/main.css"/><script src="/kili-docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/kili-docs/"><img class="logo" src="/kili-docs/img/favicon.png" alt="Kili Docs"/><h2 class="headerTitleWithLogo">Kili Docs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"></ul></nav></div></header></div></div><div class="navPusher singleRowMobileNav"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>API GraphQL</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction à Kili Technology</h3><ul class=""><li class="navListItem"><a class="navItem" href="/kili-docs/docs/introduction-a-kili-technology">Introduction à Kili Technology</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/kili-technology-permet">Kili Technology permet</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/navigateur-compatible">Navigateur compatible</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/url-d-acces">Url d&#x27;Accès</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Définitions</h3><ul class=""><li class="navListItem"><a class="navItem" href="/kili-docs/docs/definitions">Définitions</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Les utilisateurs</h3><ul class=""><li class="navListItem"><a class="navItem" href="/kili-docs/docs/les-utilisateurs">Les utilisateurs</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/informations-personnelles">Informations Personnelles</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/modifier-son-mot-de-passe">Modifier son mot de passe</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/organisation">Organisation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Les projets</h3><ul class=""><li class="navListItem"><a class="navItem" href="/kili-docs/docs/les-projets">Les projets</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/la-liste-des-projets">La liste des projets</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/overview-du-projet">Overview du projet</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/dataset">Dataset</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/audit-labelers">Audit labelers</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Des interfaces simples et intuitives</h3><ul class=""><li class="navListItem"><a class="navItem" href="/kili-docs/docs/des-interfaces-simples-et-intuitives">Des interfaces simples et intuitives</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/image">Image</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/named-entities-recognition-and-relationships-extraction">Named entities recognition &amp; relationships extraction</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/transcription-d-image-ocr">Transcription d&#x27;image / OCR</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/classification">Classification</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/sentiment">Sentiment</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/transcription-de-la-voix-speech-to-text">Transcription de la voix  / Speech to text</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Une ingestion facile de la donnée</h3><ul class=""><li class="navListItem"><a class="navItem" href="/kili-docs/docs/une-ingestion-facile-de-la-donnee">Une ingestion facile de la donnée</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/charger-de-la-donnee-texte-en-local">Charger de la donnée texte en local</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/charger-de-la-donnee-image-et-audio-a-partir-d-un-cloud-public">Charger de la-donnée image et audio à partir d&#x27;un cloud public</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/donnee-on-premise-ou-sur-cloud-prive">Donnée on premise ou sur cloud privé</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">La gestion des membres et des droits</h3><ul class=""><li class="navListItem"><a class="navItem" href="/kili-docs/docs/la-gestion-des-membres-et-des-droits">La gestion des membres et des droits</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/les-roles-par-projet">Les rôles par projet</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/la-distribution-de-la-charge">La distribution de la charge</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">La gestion de la qualité</h3><ul class=""><li class="navListItem"><a class="navItem" href="/kili-docs/docs/la-gestion-de-la-qualite">La gestion de la qualité</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/instructions">Instructions</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/consensus">Consensus</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/honeypot">Honeypot</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/les-kpis-de-qualite">Les KPIs de qualité</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/le-processus-de-relecture">Le processus de Relecture</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">L&#x27;export de données</h3><ul class=""><li class="navListItem"><a class="navItem" href="/kili-docs/docs/l-export-de-donnees">L&#x27;export de données</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/format-de-la-donnee">Format de la donnée</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/illustration">Illustration</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API GraphQL</h3><ul class=""><li class="navListItem"><a class="navItem" href="/kili-docs/docs/api-graphql">API GraphQL</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/introduction-a-graphql">Introduction à GraphQL</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/modele-de-donnee">Modèle de données</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/authentification">Authentification</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/kili-docs/docs/importer-de-la-donnee">Importer de la donnée</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/exporter-de-la-donnee">Exporter de la donnée</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/importer-des-labels">Importer des labels</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/exporter-des-labels">Exporter des labels</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/creer-un-projet">Créer un projet</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/creer-un-utilisateur">Créer un utilisateur</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/ajouter-un-utilisateur-a-un-projet">Ajouter un utilisateur à un projet</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/supprimer-la-donnee">Supprimer la donnée</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/creer-un-honeypot">Créer un Honeypot</a></li><li class="navListItem"><a class="navItem" href="/kili-docs/docs/voir-le-honeypot-d-une-annotation">Voir le Honeypot d&#x27;une annotation</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Importer de la donnée</h1></header><article><div><span><p>Kili Technology a deux façons d'importer des données :</p>
<h2><a class="anchor" aria-hidden="true" id="asset-par-asset"></a><a href="#asset-par-asset" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Asset par asset</h2>
<p>Optimale pour la synchronisation en temps réel et le contrôle fin de la granularité:</p>
<pre><code class="hljs css language-python"><span class="hljs-keyword">from</span> json <span class="hljs-keyword">import</span> loads, dumps

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">append_to_dataset</span><span class="hljs-params">(client, project_id, content, external_id, filename, is_instructions,
    instructions, is_honeypot, consensus_mark, honeypot_mark, status)</span>:</span>
    result = client.execute(<span class="hljs-string">'''
    mutation {
      appendToDataset(projectID: "%s"
        content: "%s",
        externalID: "%s",
        filename: "%s",
        isInstructions: %s,
        instructions: "%s",
        isHoneypot: %s,
        consensusMark: %d,
        honeypotMark: %d,
        status: %s) {
        id
      }
    }
    '''</span> % (project_id, content, external_id, filename, str(is_instructions).lower(),
        instructions, str(is_honeypot).lower(), consensus_mark, honeypot_mark, status))
    <span class="hljs-keyword">return</span> loads(result)[<span class="hljs-string">'data'</span>][<span class="hljs-string">'appendToDataset'</span>]

<span class="hljs-comment"># Computer Vision project</span>

project_id = append_to_dataset(graphql_client,
    project_id=<span class="hljs-string">'d9729feb74992cc3482b350163a1a010'</span>,
    content=<span class="hljs-string">'https://drive.google.com/uc?export=view&amp;id=17uAKNmBuojnXwTfts-HveAcFNXzBtv6i'</span>,
    external_id=<span class="hljs-string">'image_1'</span>,
    filename=<span class="hljs-string">'image_1.jpg'</span>,
    is_instructions=<span class="hljs-literal">False</span>,
    instructions=<span class="hljs-string">''</span>,
    is_honeypot=<span class="hljs-literal">False</span>,
    consensus_mark=<span class="hljs-number">0</span>,
    honeypot_mark=<span class="hljs-number">0</span>,
    status=<span class="hljs-string">'TODO'</span>)

<span class="hljs-comment"># Natural Language Processing project</span>

project_id = append_to_dataset(graphql_client,
    project_id=<span class="hljs-string">'84d9cfc2f395ce883a41d7ffc1bbcf4e'</span>,
    content=<span class="hljs-string">'Hello World ! Here is the content of my document.'</span>,
    external_id=<span class="hljs-string">'doc_1'</span>,
    filename=<span class="hljs-string">'doc_1.txt'</span>,
    is_instructions=<span class="hljs-literal">False</span>,
    instructions=<span class="hljs-string">''</span>,
    is_honeypot=<span class="hljs-literal">False</span>,
    consensus_mark=<span class="hljs-number">0</span>,
    honeypot_mark=<span class="hljs-number">0</span>,
    status=<span class="hljs-string">'TODO'</span>)
</code></pre>
<p>Si vos données sont au format image, elle doivent être hébergées sur un serveur web (par exemple Google Drive), vous pointez alors Kili vers vos données en donnant à l'API les URL vers chaque fichier.</p>
<p>L'API Kili est limitée à 300 requêtes par minute. Nous vous recommandons d'envoyer les demandes d'importation l'une après l'autre et non par lots.</p>
<h2><a class="anchor" aria-hidden="true" id="en-vrac"></a><a href="#en-vrac" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>En vrac</h2>
<p>Idéale pour l'importation de grandes quantités de données.
Si vous téléchargez de grandes quantités de données, utilisez la fonction d'importation en masse pour éviter d'être limité dans le temps ou de rencontrer des erreurs.</p>
<pre><code class="hljs css language-python"><span class="hljs-keyword">from</span> json <span class="hljs-keyword">import</span> loads, dumps

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">append_many_to_dataset</span><span class="hljs-params">(client, project_id_array, content_array, external_id_array, filename_array, is_instructions_array,
    instructions_array, is_honeypot_array, consensus_mark_array, honeypot_mark_array, status_array)</span>:</span>
    result = client.execute(<span class="hljs-string">'''
    mutation {
      appendManyToDataset(
        projectIDArray: %s,
        contentArray: %s,
        externalIDArray: %s,
        filenameArray: %s,
        isInstructionsArray: %s,
        instructionsArray: %s,
        isHoneypotArray: %s,
        consensusMarkArray: %s,
        honeypotMarkArray: %s,
        statusArray: %s) {
        id
      }
    }
    '''</span> % (dumps(project_id_array), dumps(content_array), dumps(external_id_array), dumps(filename_array), dumps(is_instructions_array).lower(),
        dumps(instructions_array), dumps(is_honeypot_array).lower(), dumps(consensus_mark_array), dumps(honeypot_mark_array), dumps(status_array).replace(<span class="hljs-string">'"'</span>, <span class="hljs-string">''</span>)))
    <span class="hljs-keyword">return</span> loads(result)[<span class="hljs-string">'data'</span>][<span class="hljs-string">'appendManyToDataset'</span>]

<span class="hljs-comment"># Natural Language Processing project</span>

project_id = append_many_to_dataset(graphql_client,
    project_id_array=[<span class="hljs-string">'84d9cfc2f395ce883a41d7ffc1bbcf4e'</span>] * <span class="hljs-number">2</span>,
    content_array=[<span class="hljs-string">'Hello world!'</span>, <span class="hljs-string">'Here is another document'</span>],
    external_id_array=[<span class="hljs-string">'doc_1'</span>, <span class="hljs-string">'doc_2'</span>],
    filename_array=[<span class="hljs-string">'doc_1.txt'</span>, <span class="hljs-string">'doc_2.txt'</span>],
    is_instructions_array=[<span class="hljs-literal">False</span>, <span class="hljs-literal">False</span>],
    instructions_array=[<span class="hljs-string">''</span>, <span class="hljs-string">''</span>],
    is_honeypot_array=[<span class="hljs-literal">False</span>, <span class="hljs-literal">False</span>],
    consensus_mark_array=[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>],
    honeypot_mark_array=[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>],
    status_array=[<span class="hljs-string">'TODO'</span>, <span class="hljs-string">'TODO'</span>])

<span class="hljs-comment"># Same principle for Computer Vision project...</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/kili-docs/docs/authentification"><span class="arrow-prev">← </span><span>Authentification</span></a><a class="docs-next button" href="/kili-docs/docs/exporter-de-la-donnee"><span>Exporter de la donnée</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#asset-par-asset">Asset par asset</a></li><li><a href="#en-vrac">En vrac</a></li></ul></nav></div></div></body></html>